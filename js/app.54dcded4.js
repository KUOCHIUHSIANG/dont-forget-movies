(function(t){function e(e){for(var o,a,n=e[0],l=e[1],c=e[2],h=0,d=[];h<n.length;h++)a=n[h],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&d.push(r[a][0]),r[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);u&&u(e);while(d.length)d.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],o=!0,a=1;a<i.length;a++){var n=i[a];0!==r[n]&&(o=!1)}o&&(s.splice(e--,1),t=l(l.s=i[0]))}return t}var o={},a={app:0},r={app:0},s=[];function n(t){return l.p+"js/"+({}[t]||t)+"."+{"chunk-08bfd8ae":"879a23ab","chunk-691b558a":"12140402","chunk-79597976":"59d62856","chunk-7ce32daa":"47b3d71a"}[t]+".js"}function l(e){if(o[e])return o[e].exports;var i=o[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.e=function(t){var e=[],i={"chunk-08bfd8ae":1,"chunk-691b558a":1,"chunk-79597976":1,"chunk-7ce32daa":1};a[t]?e.push(a[t]):0!==a[t]&&i[t]&&e.push(a[t]=new Promise((function(e,i){for(var o="css/"+({}[t]||t)+"."+{"chunk-08bfd8ae":"498217b5","chunk-691b558a":"300f3e41","chunk-79597976":"933feb31","chunk-7ce32daa":"c8535f46"}[t]+".css",r=l.p+o,s=document.getElementsByTagName("link"),n=0;n<s.length;n++){var c=s[n],h=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(h===o||h===r))return e()}var d=document.getElementsByTagName("style");for(n=0;n<d.length;n++){c=d[n],h=c.getAttribute("data-href");if(h===o||h===r)return e()}var u=document.createElement("link");u.rel="stylesheet",u.type="text/css",u.onload=e,u.onerror=function(e){var o=e&&e.target&&e.target.src||r,s=new Error("Loading CSS chunk "+t+" failed.\n("+o+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=o,delete a[t],u.parentNode.removeChild(u),i(s)},u.href=r;var f=document.getElementsByTagName("head")[0];f.appendChild(u)})).then((function(){a[t]=0})));var o=r[t];if(0!==o)if(o)e.push(o[2]);else{var s=new Promise((function(e,i){o=r[t]=[e,i]}));e.push(o[2]=s);var c,h=document.createElement("script");h.charset="utf-8",h.timeout=120,l.nc&&h.setAttribute("nonce",l.nc),h.src=n(t);var d=new Error;c=function(e){h.onerror=h.onload=null,clearTimeout(u);var i=r[t];if(0!==i){if(i){var o=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",d.name="ChunkLoadError",d.type=o,d.request=a,i[1](d)}r[t]=void 0}};var u=setTimeout((function(){c({type:"timeout",target:h})}),12e4);h.onerror=h.onload=c,document.head.appendChild(h)}return Promise.all(e)},l.m=t,l.c=o,l.d=function(t,e,i){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)l.d(i,o,function(e){return t[e]}.bind(null,o));return i},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/dont-forget-movies/",l.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],h=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var u=h;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"1b61":function(t,e,i){},"1d6a":function(t,e,i){},"2a4a":function(t,e,i){"use strict";i("5182")},"3de0":function(t,e,i){"use strict";i("1b61")},"472f":function(t,e,i){},"47bd":function(t,e,i){},"4af2":function(t,e,i){"use strict";i("472f")},5182:function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);var o=i("2b0e"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"dont-forget-movie"}},[i("Navbar"),i("router-view"),i("Footer")],1)},r=[],s=(i("4989"),i("ab8b"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"nav-container"},[i("nav",{staticClass:"navbar navbar-expand-lg navbar-dark"},[i("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[t._v("Don’t Forget !")]),i("ul",{staticClass:"navbar-nav mr-auto"},[i("li",{staticClass:"nav-item"},[i("router-link",{staticClass:"nav-link",attrs:{to:"/dont-forget-movies/to-watch"}},[t._v("To Watch")])],1)]),i("form",{staticClass:"form-inline search-form my-2 my-lg-0",class:{"search-active":t.searchActive},on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.searchMovies.apply(null,arguments)}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"search-input mr-sm-2",attrs:{type:"search",placeholder:"請輸入電影名稱","aria-label":"Search"},domProps:{value:t.keyword},on:{focus:t.searchFocus,blur:t.searchBlur,input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),i("div",{staticClass:"search-icon-wrapper",on:{click:t.searchMovies}},[i("font-awesome-icon",{attrs:{icon:"fa-solid fa-magnifying-glass"}})],1)])],1)])}),n=[],l={data(){return{keyword:"",searchActive:!1}},methods:{searchFocus(){this.searchActive=!0},searchBlur(){this.searchActive=!1},searchMovies(){0!==this.keyword.length&&(document.activeElement.blur(),this.$router.push({name:"search",query:{keyword:this.keyword}}),this.keyword="")}}},c=l,h=(i("b48f"),i("2877")),d=Object(h["a"])(c,s,n,!1,null,"d40f5dc2",null),u=d.exports,f=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},v=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"footer-container"},[o("footer",{staticClass:"footer"},[o("div",{staticClass:"info"},[o("a",{staticClass:"github",attrs:{href:"https://github.com/KUOCHIUHSIANG/dont-forget-movies",target:"_blank"}},[t._v(" ©2022 Jater Kuo ")])]),o("div",{staticClass:"powered"},[t._v(" Powered by "),o("div",{staticClass:"logo-container"},[o("a",{attrs:{href:"https://www.themoviedb.org/documentation/api",target:"_blank"}},[o("img",{attrs:{src:i("ab1a"),alt:""}})])])])])])}],m=(i("8e5e"),{}),p=Object(h["a"])(m,f,v,!1,null,"bef043e2",null),g=p.exports,b={name:"App",components:{Navbar:u,Footer:g}},y=b,_=(i("f26c"),Object(h["a"])(y,a,r,!1,null,"0e619eda",null)),w=_.exports,T=i("8c4f"),M=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("h1",[t._v(" 404 Page Not Found ")])},W=[],S={},k=Object(h["a"])(S,M,W,!1,null,null,null),C=k.exports,$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container py-5"},[i("MovieList",{attrs:{initialMovies:t.trendingMovies,initialTitle:t.trendingTitle},on:{"after-show-modal":t.afterShowModal,"after-add-to-watch":t.afterAddToWatch,"after-delete-to-watch":t.afterDeleteToWatch}}),i("MovieList",{attrs:{initialMovies:t.onShowMovies,initialTitle:t.onShowTitle},on:{"after-show-modal":t.afterShowModal,"after-add-to-watch":t.afterAddToWatch,"after-delete-to-watch":t.afterDeleteToWatch}}),i("MovieList",{attrs:{initialMovies:t.comingMovies,initialTitle:t.comingTitle},on:{"after-show-modal":t.afterShowModal,"after-add-to-watch":t.afterAddToWatch,"after-delete-to-watch":t.afterDeleteToWatch}}),i("MovieList",{attrs:{initialMovies:t.popularityMovies,initialTitle:t.popularityTitle},on:{"after-show-modal":t.afterShowModal,"after-add-to-watch":t.afterAddToWatch,"after-delete-to-watch":t.afterDeleteToWatch}}),t.modalIsLoading?i("MovieDetailLoadingVue"):t._e(),t.modalVisibility?i("router-view",{attrs:{initialMovie:t.movie,initialCollectionData:t.collectionData},on:{"after-close-modal":t.afterCloseModal,"after-add-to-watch":t.afterAddToWatch,"after-delete-to-watch":t.afterDeleteToWatch}}):t._e(),t.modalVisibility||t.modalIsLoading?i("div",{staticClass:"modal-backdrop"}):t._e()],1)},L=[],D=i("cfd9"),P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"movie-list"},[i("div",{staticClass:"movie-list__title"},[t._v(t._s(t.title))]),i("div",{staticClass:"movie-list__ul-container"},[i("ul",{ref:"listScroll",staticClass:"movie-list__list"},[!t.movies||t.movies.length<1?i("LoadingSpinner"):t._e(),t._l(t.movies,(function(e){return i("li",{key:e.id,staticClass:"list-item"},[e.posterPath?i("router-link",{staticClass:"item-wrapper",attrs:{to:{name:"movie-detail",params:{id:e.id}}}},[i("div",{staticClass:"hover-wrapper",on:{click:function(i){return t.showModal(e.id)}}},[i("div",{staticClass:"movie-poster"},[i("img",{staticClass:"poster",attrs:{src:t._f("fullyImagePath")(e.posterPath),alt:"poster"}}),e.inToWatch?i("div",{staticClass:"movie-detail-header-delete-button button-size",on:{click:function(i){return i.stopPropagation(),i.preventDefault(),t.deleteToWatch(e)}}},[t._v(" ✔ ")]):i("div",{staticClass:"movie-detail-header-add-button button-size",on:{click:function(i){return i.stopPropagation(),i.preventDefault(),t.addToWatch(e)}}},[t._v(" ＋ ")])]),i("div",{staticClass:"movie-info"},[i("div",{staticClass:"movie-info__movie-title"},[t._v(t._s(e.title))]),i("div",{staticClass:"movie-info__movie-original-title"},[t._v(" "+t._s(e.originalTitle)+" ")]),i("div",{staticClass:"movie-info__movie-release-date"},[t._v(" 上映日期："),i("span",[t._v(t._s(e.releaseDate))])])])])]):t._e()],1)}))],2),i("div",{staticClass:"previous",on:{click:t.scrollLeft}},[i("font-awesome-icon",{attrs:{icon:"fa-solid fa-caret-left"}})],1),i("div",{staticClass:"next",on:{click:t.scrollRight}},[i("font-awesome-icon",{attrs:{icon:"fa-solid fa-caret-right"}})],1)])])},O=[],A=i("ac0d"),x=i("d76c"),E={components:{LoadingSpinner:x["a"]},mixins:[A["a"]],props:{initialTitle:{type:String,required:!0},initialMovies:{type:Array,required:!0}},data(){return{movies:this.initialMovies,title:this.initialTitle}},methods:{showModal(t){this.$emit("after-show-modal",t)},addToWatch(t){this.$emit("after-add-to-watch",t)},deleteToWatch(t){this.$emit("after-delete-to-watch",t)},scrollLeft(){let t=this.$refs.listScroll.clientWidth;t<=555?this.$refs.listScroll.scrollLeft-=568:t>555&&t<=745?this.$refs.listScroll.scrollLeft-=510:t>745&&t<=747?this.$refs.listScroll.scrollLeft-=766:t>747&&t<=901?this.$refs.listScroll.scrollLeft-=682:t>901&&t<=971?this.$refs.listScroll.scrollLeft-=910:t>971&&t<=991?this.$refs.listScroll.scrollLeft-=794:t>991&&(this.$refs.listScroll.scrollLeft-=992)},scrollRight(){let t=this.$refs.listScroll.clientWidth;t<=555?this.$refs.listScroll.scrollLeft+=568:t>555&&t<=745?this.$refs.listScroll.scrollLeft+=510:t>745&&t<=747?this.$refs.listScroll.scrollLeft+=766:t>747&&t<=901?this.$refs.listScroll.scrollLeft+=682:t>901&&t<=971?this.$refs.listScroll.scrollLeft+=910:t>971&&t<=991?this.$refs.listScroll.scrollLeft+=794:t>991&&(this.$refs.listScroll.scrollLeft+=992)}},watch:{initialMovies(t){this.movies=t},initialTitle(t){this.title=t}}},j=E,I=(i("4af2"),Object(h["a"])(j,P,O,!1,null,"044afd87",null)),N=I.exports,z=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal",attrs:{tabindex:"-1",id:"movie-detail"}},[i("div",{staticClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable"},[i("div",{staticClass:"modal-content"},[i("LoadingSpinner"),i("div",{staticClass:"movie-detail-header-close-button",attrs:{"data-dismiss":"modal"}},[t._v(" ✕ ")])],1)])])},V=[],F={components:{LoadingSpinner:x["a"]}},q=F,B=(i("3de0"),Object(h["a"])(q,z,V,!1,null,"64269746",null)),J=B.exports;const U="to-watch-movies";var R={components:{MovieList:N,MovieDetailLoadingVue:J},created(){this.toWatchMovies=JSON.parse(localStorage.getItem(U))||[],this.getToday(),this.fetchTrending(),this.fetchOnShow(),this.fetchComing(),this.fetchPopularity()},data(){return{trendingMovies:[],onShowMovies:[],comingMovies:[],popularityMovies:[],trendingTitle:"本週熱門",onShowTitle:"現正上映",comingTitle:"即將上映",popularityTitle:"近期受歡迎",today:"",modalVisibility:!1,modalIsLoading:!1,movie:{id:0,backdropPath:"",genres:[],belongsToCollection:{},title:"",originalTitle:"",releaseDate:"",runtime:0,overview:"",voteAverage:0,voteCount:0,credits:{},inToWatch:!1},collectionData:[],toWatchMovies:[]}},methods:{filterToWatch(t){let e=t.map(t=>{if(this.toWatchMovies.length>0){for(let e=0;e<this.toWatchMovies.length;e++)t.id===this.toWatchMovies[e].id&&(t.inToWatch=!0);return t}return t});return e},filterDeleteToWatch(t,e){let i=e.map(e=>e.id===t?{...e,inToWatch:!1}:e);return i},saveStorage(){localStorage.setItem(U,JSON.stringify(this.toWatchMovies))},getToday(){const t=new Date,e=t.getFullYear();let i=t.getMonth()+1,o=t.getDate();i<10&&(i=0+i.toString()),o<10&&(o=0+o.toString()),this.today=e+"-"+i+"-"+o},async fetchTrending(){try{const{data:t}=await D["a"].getTrending();this.trendingMovies=t.results.map(t=>({id:t.id,posterPath:t.poster_path,title:t.title,originalTitle:t.original_title,releaseDate:t.release_date,inToWatch:!1})),this.trendingMovies=this.filterToWatch(this.trendingMovies)}catch(t){console.log("fetch trending error",t)}},async fetchOnShow(){try{const{data:t}=await D["a"].getOnShow({lte:this.today});this.onShowMovies=t.results.map(t=>({id:t.id,posterPath:t.poster_path,title:t.title,originalTitle:t.original_title,releaseDate:t.release_date,inToWatch:!1})),this.onShowMovies=this.filterToWatch(this.onShowMovies)}catch(t){console.log("fetch onShow error",t)}},async fetchComing(){try{const{data:t}=await D["a"].getComing({gte:this.today});this.comingMovies=t.results.map(t=>({id:t.id,posterPath:t.poster_path,title:t.title,originalTitle:t.original_title,releaseDate:t.release_date,inToWatch:!1})),this.comingMovies=this.filterToWatch(this.comingMovies)}catch(t){console.log("fetch coming error",t)}},async fetchPopularity(){try{const{data:t}=await D["a"].getPopularity();this.popularityMovies=t.results.map(t=>({id:t.id,posterPath:t.poster_path,title:t.title,originalTitle:t.original_title,releaseDate:t.release_date,inToWatch:!1})),this.popularityMovies=this.filterToWatch(this.popularityMovies)}catch(t){console.log("fetch popularity error",t)}},async afterShowModal(t){try{document.body.style.overflow="hidden",this.modalVisibility=!1,this.modalIsLoading=!0;const{data:e}=await D["a"].getMovieDetail({movieId:t});if(this.movie={...this.movie,id:e.id,backdropPath:e.backdrop_path,posterPath:e.poster_path,genres:e.genres,belongsToCollection:e.belongs_to_collection,title:e.title,originalTitle:e.original_title,releaseDate:e.release_date,runtime:e.runtime,overview:e.overview,voteAverage:e.vote_average,voteCount:e.vote_count,credits:e.credits,inToWatch:!1},this.toWatchMovies.length>0)for(let i=0;i<this.toWatchMovies.length;i++)Number(t)===this.toWatchMovies[i].id&&(this.movie.inToWatch=!0);if(e.belongs_to_collection){let t=e.belongs_to_collection.id;const i=await D["a"].getCollection({collectionId:t});this.collectionData=i.data.parts.filter(t=>t.id!==this.movie.id)}else this.collectionData=null;this.modalIsLoading=!1,this.modalVisibility=!0}catch(e){this.modalIsLoading=!1,console.log("after show modal error",e)}},afterCloseModal(){this.modalVisibility=!1,document.body.removeAttribute("style"),this.$router.push("/dont-forget-movies")},afterAddToWatch(t){t.inToWatch=!0;const e={id:t.id,title:t.title,originalTitle:t.originalTitle,posterPath:t.posterPath,releaseDate:t.releaseDate,inToWatch:t.inToWatch};this.toWatchMovies.push(e),this.trendingMovies=this.filterToWatch(this.trendingMovies),this.onShowMovies=this.filterToWatch(this.onShowMovies),this.comingMovies=this.filterToWatch(this.comingMovies),this.popularityMovies=this.filterToWatch(this.popularityMovies)},afterDeleteToWatch(t){t.inToWatch=!1,this.toWatchMovies=this.toWatchMovies.filter(e=>e.id!==t.id),this.trendingMovies=this.filterDeleteToWatch(t.id,this.trendingMovies),this.onShowMovies=this.filterDeleteToWatch(t.id,this.onShowMovies),this.comingMovies=this.filterDeleteToWatch(t.id,this.comingMovies),this.popularityMovies=this.filterDeleteToWatch(t.id,this.popularityMovies)}},watch:{toWatchMovies:{handler:function(){this.saveStorage()},deep:!0}},beforeRouteUpdate(t,e,i){const{id:o}=t.params;o?this.afterShowModal(o):(this.modalVisibility=!1,document.body.removeAttribute("style")),i()}},H=R,K=(i("fa12"),Object(h["a"])(H,$,L,!1,null,"f2e8fdda",null)),G=K.exports;o["a"].use(T["a"]);const Y=[{path:"/",name:"root",redirect:"/dont-forget-movies"},{path:"/dont-forget-movies",name:"dont-forget-movies",component:G,children:[{path:"movie/:id",name:"movie-detail",component:()=>i.e("chunk-08bfd8ae").then(i.bind(null,"1adb"))}]},{path:"/dont-forget-movies/to-watch",name:"to-watch",component:()=>Promise.all([i.e("chunk-691b558a"),i.e("chunk-7ce32daa")]).then(i.bind(null,"4e09"))},{path:"/dont-forget-movies/search",name:"search",component:()=>Promise.all([i.e("chunk-691b558a"),i.e("chunk-79597976")]).then(i.bind(null,"2d3b"))},{path:"*",name:"not-found",component:C}],Q=new T["a"]({linkExactActiveClass:"active",routes:Y});var X=Q,Z=i("c28b"),tt=i.n(Z),et=(i("c1c3"),i("ecee")),it=i("ad3d"),ot=i("c074");et["c"].add(ot["c"],ot["a"],ot["b"]),o["a"].component("font-awesome-icon",it["a"]),o["a"].config.productionTip=!1,o["a"].use(tt.a),new o["a"]({router:X,render:t=>t(w)}).$mount("#app")},"6bc0":function(t,e,i){},"8e5e":function(t,e,i){"use strict";i("6bc0")},ab1a:function(t,e,i){t.exports=i.p+"img/TMDBlogo.56fd61ee.svg"},ac0d:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));const o={filters:{fullyImagePath(t){return"https://image.tmdb.org/t/p/w500"+t}}}},b48f:function(t,e,i){"use strict";i("c918")},c1c3:function(t,e,i){},c918:function(t,e,i){},cfd9:function(t,e,i){"use strict";var o=i("bc3a"),a=i.n(o);const r="https://api.themoviedb.org/3",s=a.a.create({baseURL:r}),n="a9db832a40cc4fc21466430649b69a2e";e["a"]={getTrending(){return s.get(`/trending/movie/week?api_key=${n}&language=zh-TW`)},getOnShow({lte:t}){return s.get(`/discover/movie?api_key=${n}&language=zh-TW&region=TW&release_date.lte=${t}&sort_by=release_date.desc&with_release_type=2|3`)},getComing({gte:t}){return s.get(`/discover/movie?api_key=${n}&language=zh-TW&region=TW&release_date.gte=${t}&sort_by=release_date.asc&with_release_type=2|3`)},getPopularity(){return s.get(`/discover/movie?api_key=${n}&language=zh-TW&region=TW&with_release_type=2|3&sort_by=popularity.desc`)},getMovieDetail({movieId:t}){return s.get(`/movie/${t}?api_key=${n}&language=zh-TW&region=TW&append_to_response=credits`)},getCollection({collectionId:t}){return s.get(`/collection/${t}?api_key=${n}&language=zh-TW&region=TW`)},searchMovie({keyword:t}){return s.get(`/search/movie?api_key=${n}&language=zh-TW&query=${t}`)}}},d76c:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"loader"})},a=[],r=(i("2a4a"),i("2877")),s={},n=Object(r["a"])(s,o,a,!1,null,"7f11c721",null);e["a"]=n.exports},f26c:function(t,e,i){"use strict";i("1d6a")},fa12:function(t,e,i){"use strict";i("47bd")}});
//# sourceMappingURL=app.54dcded4.js.map